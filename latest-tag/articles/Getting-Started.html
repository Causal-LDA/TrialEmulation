<!DOCTYPE html>
<!-- Generated by pkgdown + https://github.com/insightsengineering/r-pkgdown-multiversion -->
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting-Started â€¢ TrialEmulation</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><script src="../deps/MathJax-3.2.2/tex-chtml.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting-Started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">TrialEmulation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Getting-Started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/new-interface.html">New Interface</a></li>
    <li><a class="dropdown-item" href="../articles/Extending-TrialEmulation.html">Extending TrialEmulation</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      <div><li class="nav-item dropdown">
    <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-versions">Versions</a>
    <div class="dropdown-menu" aria-labelledby="dropdown-versions">
    <a class="dropdown-item" data-toggle="tooltip" title="" href="https://Causal-LDA.github.io/TrialEmulation/main">main</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://Causal-LDA.github.io/TrialEmulation/v0.0.4.2">v0.0.4.2</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://Causal-LDA.github.io/TrialEmulation/v0.0.4.1">v0.0.4.1</a>
<a class="dropdown-item" data-toggle="tooltip" title="" href="https://Causal-LDA.github.io/TrialEmulation/v0.0.4.0">v0.0.4.0</a>
</div>
</li></div>
</ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Causal-LDA/TrialEmulation/" aria-label="github"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Getting-Started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Causal-LDA/TrialEmulation/blob/v0.0.4.2/vignettes/Getting-Started.Rmd" class="external-link"><code>vignettes/Getting-Started.Rmd</code></a></small>
      <div class="d-none name"><code>Getting-Started.Rmd</code></div>
    </div>

    
    
<p>This package implements methods to analyse a sequence of target
trials.</p>
<p>The steps to do this are:</p>
<ol style="list-style-type: decimal">
<li>create a data set with all the required variables</li>
<li>fit models for censoring and calculate inverse probability
weights</li>
<li>expand the data set, with records for each eligible patient for each
trial period</li>
<li>fit models for outcomes</li>
</ol>
<p>The package provides two options for conducting the analysis: an <a href="#initiators">all-in-one function</a> and a set of more <a href="#flexible">flexible functions</a>.</p>
<div class="section level2">
<h2 id="required-data">Required Data<a class="anchor" aria-label="anchor" href="#required-data"></a>
</h2>
<p>To get started a longitudinal dataset must be created containing:</p>
<ul>
<li>time period</li>
<li>patient identifier</li>
<li>treatment indicator</li>
<li>outcome indicator</li>
<li>censoring indicator</li>
<li>eligibility indicator for a trial starting in each time period</li>
<li>other covariates relating to treatment, outcome, or informative
censoring to be used in the models for weights or the outcome</li>
</ul>
<p>An example data set is included to demonstrate the format:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://causal-lda.github.io/TrialEmulation/">TrialEmulation</a></span><span class="op">)</span></span>
<span><span class="co"># Prepare the example data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"trial_example"</span><span class="op">)</span></span>
<span><span class="co"># Set columns to factors as necessary</span></span>
<span><span class="va">trial_example</span><span class="op">$</span><span class="va">catvarA</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">trial_example</span><span class="op">$</span><span class="va">catvarA</span><span class="op">)</span></span>
<span><span class="va">trial_example</span><span class="op">$</span><span class="va">catvarB</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">trial_example</span><span class="op">$</span><span class="va">catvarB</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">trial_example</span><span class="op">)</span></span>
<span><span class="co">#&gt;    id eligible period outcome treatment catvarA catvarB catvarC nvarA nvarB</span></span>
<span><span class="co">#&gt; 1 202        1    310       0         0       0       2       0     0    35</span></span>
<span><span class="co">#&gt; 2 202        1    311       0         1       0       2       1     0    42</span></span>
<span><span class="co">#&gt; 3 202        1    312       0         1       0       2       1     0    48</span></span>
<span><span class="co">#&gt; 4 202        1    313       0         1       0       2       1     0    43</span></span>
<span><span class="co">#&gt; 5 202        0    314       0         1       0       2       1     0    45</span></span>
<span><span class="co">#&gt; 6 202        0    315       0         1       0       2       1     0    48</span></span>
<span><span class="co">#&gt;   nvarC</span></span>
<span><span class="co">#&gt; 1    74</span></span>
<span><span class="co">#&gt; 2    74</span></span>
<span><span class="co">#&gt; 3    74</span></span>
<span><span class="co">#&gt; 4    75</span></span>
<span><span class="co">#&gt; 5    75</span></span>
<span><span class="co">#&gt; 6    75</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="initiators">All-in-one analysis<a class="anchor" aria-label="anchor" href="#initiators"></a>
</h2>
<p>There is an all-in-one function <code>initators()</code> which does
all of the steps with one function call. This is similar to the
INITIATORS SAS macro previously published by the <a href="https://causalab.hsph.harvard.edu/" class="external-link">Harvard CAUSALab</a>. It can
be accessed via <a href="https://web.archive.org" class="external-link">web.archive.org</a>:
e.g.
<code>https://web.archive.org/web/20220814131941/https://causalab.sph.harvard.edu/software/</code>.</p>
<p>Call the <code><a href="../reference/initiators.html">initiators()</a></code> function to run the complete
analysis:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/initiators.html">initiators</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">trial_example</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  period <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>  eligible <span class="op">=</span> <span class="st">"eligible"</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"treatment"</span>,</span>
<span>  estimand_type <span class="op">=</span> <span class="st">"ITT"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>  model_var <span class="op">=</span> <span class="st">"assigned_treatment"</span>,</span>
<span>  outcome_cov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"catvarA"</span>, <span class="st">"catvarB"</span>, <span class="st">"nvarA"</span>, <span class="st">"nvarB"</span>, <span class="st">"nvarC"</span><span class="op">)</span>,</span>
<span>  use_censor_weights <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Starting data manipulation</span></span>
<span><span class="co">#&gt; Starting data extension</span></span>
<span><span class="co">#&gt; Summary of extended data:</span></span>
<span><span class="co">#&gt; Number of observations: 1939053</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Preparing for model fitting</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Fitting outcome model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = data, weights = w)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)        -3.21e+00   1.41e-01  -22.76  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; assigned_treatment -2.73e-01   4.66e-02   -5.86  4.6e-09 ***</span></span>
<span><span class="co">#&gt; trial_period        1.73e-03   6.01e-04    2.87  0.00404 ** </span></span>
<span><span class="co">#&gt; I(trial_period^2)   1.27e-06   1.48e-06    0.86  0.39199    </span></span>
<span><span class="co">#&gt; followup_time       2.85e-03   5.21e-04    5.48  4.2e-08 ***</span></span>
<span><span class="co">#&gt; I(followup_time^2) -6.90e-06   2.27e-06   -3.04  0.00233 ** </span></span>
<span><span class="co">#&gt; catvarA1            2.98e-01   2.80e-02   10.63  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA2            1.52e-01   3.86e-02    3.95  7.9e-05 ***</span></span>
<span><span class="co">#&gt; catvarA3           -1.11e+01   3.48e+01   -0.32  0.75104    </span></span>
<span><span class="co">#&gt; catvarA7            4.13e-01   3.75e-02   11.01  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarB1           -4.05e-01   1.12e-01   -3.63  0.00029 ***</span></span>
<span><span class="co">#&gt; catvarB2           -4.31e-01   1.15e-01   -3.74  0.00019 ***</span></span>
<span><span class="co">#&gt; catvarB3           -2.44e+00   3.35e-01   -7.28  3.4e-13 ***</span></span>
<span><span class="co">#&gt; catvarB7           -7.16e-01   1.12e-01   -6.37  1.8e-10 ***</span></span>
<span><span class="co">#&gt; nvarA              -8.55e-02   7.67e-03  -11.15  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarB               5.35e-03   3.16e-04   16.91  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarC              -4.20e-02   8.76e-04  -47.97  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 111015  on 1939052  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 107649  on 1939036  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 107683</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 15</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Calculating robust variance</span></span>
<span><span class="co">#&gt; Summary with robust standard error:</span></span>
<span><span class="co">#&gt;                 names  estimate robust_se      2.5%     97.5%       z  p_value</span></span>
<span><span class="co">#&gt; 1         (Intercept) -3.21e+00  7.03e-01 -4.59e+00 -1.84e+00  -4.575 4.76e-06</span></span>
<span><span class="co">#&gt; 2  assigned_treatment -2.73e-01  3.10e-01 -8.80e-01  3.35e-01  -0.880 3.79e-01</span></span>
<span><span class="co">#&gt; 3        trial_period  1.73e-03  4.07e-03 -6.25e-03  9.70e-03   0.424 6.71e-01</span></span>
<span><span class="co">#&gt; 4   I(trial_period^2)  1.27e-06  9.52e-06 -1.74e-05  1.99e-05   0.133 8.94e-01</span></span>
<span><span class="co">#&gt; 5       followup_time  2.85e-03  3.40e-03 -3.81e-03  9.52e-03   0.840 4.01e-01</span></span>
<span><span class="co">#&gt; 6  I(followup_time^2) -6.90e-06  1.62e-05 -3.87e-05  2.49e-05  -0.426 6.70e-01</span></span>
<span><span class="co">#&gt; 7            catvarA1  2.98e-01  1.88e-01 -6.99e-02  6.66e-01   1.587 1.12e-01</span></span>
<span><span class="co">#&gt; 8            catvarA2  1.52e-01  2.84e-01 -4.03e-01  7.08e-01   0.537 5.91e-01</span></span>
<span><span class="co">#&gt; 9            catvarA3 -1.11e+01  9.45e-01 -1.29e+01 -9.20e+00 -11.697 0.00e+00</span></span>
<span><span class="co">#&gt; 10           catvarA7  4.13e-01  2.17e-01 -1.32e-02  8.39e-01   1.899 5.75e-02</span></span>
<span><span class="co">#&gt; 11           catvarB1 -4.05e-01  3.06e-01 -1.00e+00  1.94e-01  -1.325 1.85e-01</span></span>
<span><span class="co">#&gt; 12           catvarB2 -4.31e-01  3.64e-01 -1.14e+00  2.82e-01  -1.186 2.36e-01</span></span>
<span><span class="co">#&gt; 13           catvarB3 -2.44e+00  9.25e-01 -4.25e+00 -6.27e-01  -2.637 8.36e-03</span></span>
<span><span class="co">#&gt; 14           catvarB7 -7.16e-01  3.04e-01 -1.31e+00 -1.20e-01  -2.354 1.86e-02</span></span>
<span><span class="co">#&gt; 15              nvarA -8.55e-02  4.49e-02 -1.74e-01  2.55e-03  -1.903 5.70e-02</span></span>
<span><span class="co">#&gt; 16              nvarB  5.35e-03  2.22e-03  1.00e-03  9.70e-03   2.412 1.59e-02</span></span>
<span><span class="co">#&gt; 17              nvarC -4.20e-02  6.89e-03 -5.55e-02 -2.85e-02  -6.102 1.05e-09</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Trial Emulation Outcome Model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Outcome model formula:</span></span>
<span><span class="co">#&gt; outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficent summary (robust):</span></span>
<span><span class="co">#&gt;               names  estimate robust_se      2.5%     97.5%       z p_value</span></span>
<span><span class="co">#&gt;         (Intercept) -3.21e+00  7.03e-01 -4.59e+00 -1.84e+00  -4.575   5e-06</span></span>
<span><span class="co">#&gt;  assigned_treatment -2.73e-01  3.10e-01 -8.80e-01  3.35e-01  -0.880   0.379</span></span>
<span><span class="co">#&gt;        trial_period  1.73e-03  4.07e-03 -6.25e-03  9.70e-03   0.424   0.671</span></span>
<span><span class="co">#&gt;   I(trial_period^2)  1.27e-06  9.52e-06 -1.74e-05  1.99e-05   0.133   0.894</span></span>
<span><span class="co">#&gt;       followup_time  2.85e-03  3.40e-03 -3.81e-03  9.52e-03   0.840   0.401</span></span>
<span><span class="co">#&gt;  I(followup_time^2) -6.90e-06  1.62e-05 -3.87e-05  2.49e-05  -0.426   0.670</span></span>
<span><span class="co">#&gt;            catvarA1  2.98e-01  1.88e-01 -6.99e-02  6.66e-01   1.587   0.112</span></span>
<span><span class="co">#&gt;            catvarA2  1.52e-01  2.84e-01 -4.03e-01  7.08e-01   0.537   0.591</span></span>
<span><span class="co">#&gt;            catvarA3 -1.11e+01  9.45e-01 -1.29e+01 -9.20e+00 -11.697  &lt;2e-16</span></span>
<span><span class="co">#&gt;            catvarA7  4.13e-01  2.17e-01 -1.32e-02  8.39e-01   1.899   0.058</span></span>
<span><span class="co">#&gt;            catvarB1 -4.05e-01  3.06e-01 -1.00e+00  1.94e-01  -1.325   0.185</span></span>
<span><span class="co">#&gt;            catvarB2 -4.31e-01  3.64e-01 -1.14e+00  2.82e-01  -1.186   0.236</span></span>
<span><span class="co">#&gt;            catvarB3 -2.44e+00  9.25e-01 -4.25e+00 -6.27e-01  -2.637   0.008</span></span>
<span><span class="co">#&gt;            catvarB7 -7.16e-01  3.04e-01 -1.31e+00 -1.20e-01  -2.354   0.019</span></span>
<span><span class="co">#&gt;               nvarA -8.55e-02  4.49e-02 -1.74e-01  2.55e-03  -1.903   0.057</span></span>
<span><span class="co">#&gt;               nvarB  5.35e-03  2.22e-03  1.00e-03  9.70e-03   2.412   0.016</span></span>
<span><span class="co">#&gt;               nvarC -4.20e-02  6.89e-03 -5.55e-02 -2.85e-02  -6.102   1e-09</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; result$model contains the fitted glm model object.</span></span>
<span><span class="co">#&gt; result$robust$matrix contains the full robust covariance matrix.</span></span></code></pre></div>
<p>By default, this returns the final <code>glm</code> model object and
the results using the sandwich estimator.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = data, weights = w)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)        -3.21e+00   1.41e-01  -22.76  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; assigned_treatment -2.73e-01   4.66e-02   -5.86  4.6e-09 ***</span></span>
<span><span class="co">#&gt; trial_period        1.73e-03   6.01e-04    2.87  0.00404 ** </span></span>
<span><span class="co">#&gt; I(trial_period^2)   1.27e-06   1.48e-06    0.86  0.39199    </span></span>
<span><span class="co">#&gt; followup_time       2.85e-03   5.21e-04    5.48  4.2e-08 ***</span></span>
<span><span class="co">#&gt; I(followup_time^2) -6.90e-06   2.27e-06   -3.04  0.00233 ** </span></span>
<span><span class="co">#&gt; catvarA1            2.98e-01   2.80e-02   10.63  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA2            1.52e-01   3.86e-02    3.95  7.9e-05 ***</span></span>
<span><span class="co">#&gt; catvarA3           -1.11e+01   3.48e+01   -0.32  0.75104    </span></span>
<span><span class="co">#&gt; catvarA7            4.13e-01   3.75e-02   11.01  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarB1           -4.05e-01   1.12e-01   -3.63  0.00029 ***</span></span>
<span><span class="co">#&gt; catvarB2           -4.31e-01   1.15e-01   -3.74  0.00019 ***</span></span>
<span><span class="co">#&gt; catvarB3           -2.44e+00   3.35e-01   -7.28  3.4e-13 ***</span></span>
<span><span class="co">#&gt; catvarB7           -7.16e-01   1.12e-01   -6.37  1.8e-10 ***</span></span>
<span><span class="co">#&gt; nvarA              -8.55e-02   7.67e-03  -11.15  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarB               5.35e-03   3.16e-04   16.91  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarC              -4.20e-02   8.76e-04  -47.97  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 111015  on 1939052  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 107649  on 1939036  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 107683</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 15</span></span></code></pre></div>
<p>Tidy summaries of the robust models are available.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">robust</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span>
<span><span class="co">#&gt;                 names  estimate robust_se      2.5%     97.5%       z  p_value</span></span>
<span><span class="co">#&gt; 1         (Intercept) -3.21e+00  7.03e-01 -4.59e+00 -1.84e+00  -4.575 4.76e-06</span></span>
<span><span class="co">#&gt; 2  assigned_treatment -2.73e-01  3.10e-01 -8.80e-01  3.35e-01  -0.880 3.79e-01</span></span>
<span><span class="co">#&gt; 3        trial_period  1.73e-03  4.07e-03 -6.25e-03  9.70e-03   0.424 6.71e-01</span></span>
<span><span class="co">#&gt; 4   I(trial_period^2)  1.27e-06  9.52e-06 -1.74e-05  1.99e-05   0.133 8.94e-01</span></span>
<span><span class="co">#&gt; 5       followup_time  2.85e-03  3.40e-03 -3.81e-03  9.52e-03   0.840 4.01e-01</span></span>
<span><span class="co">#&gt; 6  I(followup_time^2) -6.90e-06  1.62e-05 -3.87e-05  2.49e-05  -0.426 6.70e-01</span></span>
<span><span class="co">#&gt; 7            catvarA1  2.98e-01  1.88e-01 -6.99e-02  6.66e-01   1.587 1.12e-01</span></span>
<span><span class="co">#&gt; 8            catvarA2  1.52e-01  2.84e-01 -4.03e-01  7.08e-01   0.537 5.91e-01</span></span>
<span><span class="co">#&gt; 9            catvarA3 -1.11e+01  9.45e-01 -1.29e+01 -9.20e+00 -11.697 0.00e+00</span></span>
<span><span class="co">#&gt; 10           catvarA7  4.13e-01  2.17e-01 -1.32e-02  8.39e-01   1.899 5.75e-02</span></span>
<span><span class="co">#&gt; 11           catvarB1 -4.05e-01  3.06e-01 -1.00e+00  1.94e-01  -1.325 1.85e-01</span></span>
<span><span class="co">#&gt; 12           catvarB2 -4.31e-01  3.64e-01 -1.14e+00  2.82e-01  -1.186 2.36e-01</span></span>
<span><span class="co">#&gt; 13           catvarB3 -2.44e+00  9.25e-01 -4.25e+00 -6.27e-01  -2.637 8.36e-03</span></span>
<span><span class="co">#&gt; 14           catvarB7 -7.16e-01  3.04e-01 -1.31e+00 -1.20e-01  -2.354 1.86e-02</span></span>
<span><span class="co">#&gt; 15              nvarA -8.55e-02  4.49e-02 -1.74e-01  2.55e-03  -1.903 5.70e-02</span></span>
<span><span class="co">#&gt; 16              nvarB  5.35e-03  2.22e-03  1.00e-03  9.70e-03   2.412 1.59e-02</span></span>
<span><span class="co">#&gt; 17              nvarC -4.20e-02  6.89e-03 -5.55e-02 -2.85e-02  -6.102 1.05e-09</span></span></code></pre></div>
<p>Also the sandwich robust variance-covariance matrix.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># only print the first columns</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">robust</span><span class="op">$</span><span class="va">matrix</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">17</span>, <span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;                    (Intercept) assigned_treatment trial_period</span></span>
<span><span class="co">#&gt; (Intercept)           4.94e-01           1.63e-02    -1.67e-03</span></span>
<span><span class="co">#&gt; assigned_treatment    1.63e-02           9.61e-02     3.73e-05</span></span>
<span><span class="co">#&gt; trial_period         -1.67e-03           3.73e-05     1.66e-05</span></span>
<span><span class="co">#&gt; I(trial_period^2)     2.58e-06          -2.87e-07    -3.58e-08</span></span>
<span><span class="co">#&gt; followup_time        -1.68e-04          -5.04e-05    -2.87e-06</span></span>
<span><span class="co">#&gt; I(followup_time^2)   -1.05e-06           1.82e-07     1.74e-08</span></span>
<span><span class="co">#&gt; catvarA1             -3.57e-03           4.86e-03    -6.88e-05</span></span>
<span><span class="co">#&gt; catvarA2             -1.32e-02           1.01e-02     3.44e-05</span></span>
<span><span class="co">#&gt; catvarA3             -1.47e-02           7.06e-03    -3.68e-05</span></span>
<span><span class="co">#&gt; catvarA7             -3.77e-02           1.55e-03     2.56e-04</span></span>
<span><span class="co">#&gt; catvarB1             -8.53e-02          -2.10e-02     3.82e-05</span></span>
<span><span class="co">#&gt; catvarB2             -8.70e-02          -2.41e-02     3.00e-05</span></span>
<span><span class="co">#&gt; catvarB3             -1.32e-01          -2.62e-02     2.62e-04</span></span>
<span><span class="co">#&gt; catvarB7             -1.19e-01          -2.02e-02     6.13e-06</span></span>
<span><span class="co">#&gt; nvarA                -2.51e-03          -1.07e-03     1.33e-06</span></span>
<span><span class="co">#&gt; nvarB                 1.08e-04           7.11e-05    -4.79e-07</span></span>
<span><span class="co">#&gt; nvarC                -2.66e-03           3.10e-05     2.05e-07</span></span>
<span><span class="co">#&gt;                    I(trial_period^2)</span></span>
<span><span class="co">#&gt; (Intercept)                 2.58e-06</span></span>
<span><span class="co">#&gt; assigned_treatment         -2.87e-07</span></span>
<span><span class="co">#&gt; trial_period               -3.58e-08</span></span>
<span><span class="co">#&gt; I(trial_period^2)           9.07e-11</span></span>
<span><span class="co">#&gt; followup_time               9.13e-09</span></span>
<span><span class="co">#&gt; I(followup_time^2)         -4.23e-11</span></span>
<span><span class="co">#&gt; catvarA1                    1.80e-07</span></span>
<span><span class="co">#&gt; catvarA2                   -2.61e-08</span></span>
<span><span class="co">#&gt; catvarA3                    1.58e-07</span></span>
<span><span class="co">#&gt; catvarA7                   -4.31e-07</span></span>
<span><span class="co">#&gt; catvarB1                   -6.24e-09</span></span>
<span><span class="co">#&gt; catvarB2                    2.11e-08</span></span>
<span><span class="co">#&gt; catvarB3                   -2.47e-07</span></span>
<span><span class="co">#&gt; catvarB7                    3.97e-07</span></span>
<span><span class="co">#&gt; nvarA                       1.18e-08</span></span>
<span><span class="co">#&gt; nvarB                      -1.31e-09</span></span>
<span><span class="co">#&gt; nvarC                      -8.41e-10</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="flexible">Flexible Analysis<a class="anchor" aria-label="anchor" href="#flexible"></a>
</h2>
<p>To gain complete control over the analysis and to inspect the
intermediate objects, it can be useful to run the the data preparation
and modelling steps separately.</p>
<p>This also allows for processing of very large data sets, by doing the
data preparation in chunks and then sampling from the expanded trial
data.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for the purposes of the vignette, we use a temporary directory, however it may be useful to use a permanent</span></span>
<span><span class="co"># location in order to inspect the outputs later</span></span>
<span><span class="va">working_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span>, <span class="st">"trial_emu"</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">working_dir</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">working_dir</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prep_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/data_preparation.html">data_preparation</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">trial_example</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  period <span class="op">=</span> <span class="st">"period"</span>,</span>
<span>  eligible <span class="op">=</span> <span class="st">"eligible"</span>,</span>
<span>  treatment <span class="op">=</span> <span class="st">"treatment"</span>,</span>
<span>  outcome <span class="op">=</span> <span class="st">"outcome"</span>,</span>
<span>  outcome_cov <span class="op">=</span> <span class="op">~</span> <span class="va">catvarA</span> <span class="op">+</span> <span class="va">catvarB</span> <span class="op">+</span> <span class="va">nvarA</span> <span class="op">+</span> <span class="va">nvarB</span> <span class="op">+</span> <span class="va">nvarC</span>,</span>
<span>  data_dir <span class="op">=</span> <span class="va">working_dir</span>,</span>
<span>  save_weight_models <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  estimand_type <span class="op">=</span> <span class="st">"PP"</span>,</span>
<span>  pool_cense <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  use_censor_weights <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  chunk_size <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  separate_files <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  switch_n_cov <span class="op">=</span> <span class="op">~</span> <span class="va">nvarA</span> <span class="op">+</span> <span class="va">nvarB</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Use <code>summary</code> to get an overview of the result.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">prep_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Expanded Trial Emulation data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Expanded data saved in 396 csv files:</span></span>
<span><span class="co">#&gt;   1:   /tmp/Rtmp7DZDDm/trial_emu/trial_1.csv</span></span>
<span><span class="co">#&gt;   2:   /tmp/Rtmp7DZDDm/trial_emu/trial_2.csv</span></span>
<span><span class="co">#&gt;   3:   /tmp/Rtmp7DZDDm/trial_emu/trial_3.csv</span></span>
<span><span class="co">#&gt;  ---                                        </span></span>
<span><span class="co">#&gt; 394: /tmp/Rtmp7DZDDm/trial_emu/trial_394.csv</span></span>
<span><span class="co">#&gt; 395: /tmp/Rtmp7DZDDm/trial_emu/trial_395.csv</span></span>
<span><span class="co">#&gt; 396: /tmp/Rtmp7DZDDm/trial_emu/trial_396.csv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of observations in expanded data: 963883 </span></span>
<span><span class="co">#&gt; First trial period: 1 </span></span>
<span><span class="co">#&gt; Last trial period: 396 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; Weight models</span></span>
<span><span class="co">#&gt; -------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Treatment switch models</span></span>
<span><span class="co">#&gt; -----------------------</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; switch_models$switch_d0:</span></span>
<span><span class="co">#&gt;  P(treatment = 1 | previous treatment = 0) for denominator </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         term estimate std.error statistic p.value</span></span>
<span><span class="co">#&gt;  (Intercept)    -3.84    0.0479     -80.3       0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; switch_models$switch_n0:</span></span>
<span><span class="co">#&gt;  P(treatment = 1 | previous treatment = 0) for numerator </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         term estimate std.error statistic p.value</span></span>
<span><span class="co">#&gt;  (Intercept) -3.82037    0.0679   -56.244   0.000</span></span>
<span><span class="co">#&gt;        nvarA  0.00411    0.0294     0.140   0.889</span></span>
<span><span class="co">#&gt;        nvarB -0.00066    0.0013    -0.509   0.611</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; switch_models$switch_d1:</span></span>
<span><span class="co">#&gt;  P(treatment = 1 | previous treatment = 1) for denominator </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         term estimate std.error statistic p.value</span></span>
<span><span class="co">#&gt;  (Intercept)     4.38    0.0682      64.2       0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------ </span></span>
<span><span class="co">#&gt; switch_models$switch_n1:</span></span>
<span><span class="co">#&gt;  P(treatment = 1 | previous treatment = 1) for numerator </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         term estimate std.error statistic   p.value</span></span>
<span><span class="co">#&gt;  (Intercept)  4.02225   0.11676   34.4500 4.50e-260</span></span>
<span><span class="co">#&gt;        nvarA -0.00226   0.04403   -0.0514  9.59e-01</span></span>
<span><span class="co">#&gt;        nvarB  0.00758   0.00231    3.2885  1.01e-03</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span></code></pre></div>
<p>For more information about the weighting models, we can inspect them
individually</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">prep_data</span><span class="op">$</span><span class="va">switch_models</span><span class="op">$</span><span class="va">switch_n0</span></span>
<span><span class="co">#&gt; P(treatment = 1 | previous treatment = 0) for numerator </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;         term estimate std.error statistic p.value</span></span>
<span><span class="co">#&gt;  (Intercept) -3.82037    0.0679   -56.244   0.000</span></span>
<span><span class="co">#&gt;        nvarA  0.00411    0.0294     0.140   0.889</span></span>
<span><span class="co">#&gt;        nvarB -0.00066    0.0013    -0.509   0.611</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  null.deviance df.null logLik  AIC  BIC deviance df.residual  nobs</span></span>
<span><span class="co">#&gt;           4330   21263  -2165 4335 4359     4329       21261 21264</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Object saved at "/tmp/Rtmp7DZDDm/trial_emu/weight_model_switch_n0.rds"</span></span></code></pre></div>
<p>If <code>save_weight_models = TRUE,</code> the full model objects are
saved in <code>working_dir</code>, so you can inspect the data used in
those models and further investigate how well those models fit.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">working_dir</span>, <span class="st">"*.rds"</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "weight_model_switch_d0.rds" "weight_model_switch_d1.rds"</span></span>
<span><span class="co">#&gt; [3] "weight_model_switch_n0.rds" "weight_model_switch_n1.rds"</span></span>
<span></span>
<span><span class="co"># The path is stored in the saved object</span></span>
<span><span class="va">switch_n0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="va">prep_data</span><span class="op">$</span><span class="va">switch_models</span><span class="op">$</span><span class="va">switch_n0</span><span class="op">$</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">switch_n0</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = treatment ~ nvarA + nvarB, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = data)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;             Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept) -3.82037    0.06792  -56.24   &lt;2e-16 ***</span></span>
<span><span class="co">#&gt; nvarA        0.00411    0.02943    0.14     0.89    </span></span>
<span><span class="co">#&gt; nvarB       -0.00066    0.00130   -0.51     0.61    </span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 4329.7  on 21263  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 4329.4  on 21261  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 4335</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 6</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">switch_n0</span><span class="op">$</span><span class="va">fitted.values</span>, main <span class="op">=</span> <span class="st">"Histogram of weights from model switch_n0"</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-Started_files/figure-html/weight_files-1.png" width="700"></p>
<p>We also see the expanded trial files:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">prep_data</span><span class="op">$</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/tmp/Rtmp7DZDDm/trial_emu/trial_1.csv"</span></span>
<span><span class="co">#&gt; [2] "/tmp/Rtmp7DZDDm/trial_emu/trial_2.csv"</span></span>
<span><span class="co">#&gt; [3] "/tmp/Rtmp7DZDDm/trial_emu/trial_3.csv"</span></span>
<span><span class="co">#&gt; [4] "/tmp/Rtmp7DZDDm/trial_emu/trial_4.csv"</span></span>
<span><span class="co">#&gt; [5] "/tmp/Rtmp7DZDDm/trial_emu/trial_5.csv"</span></span>
<span><span class="co">#&gt; [6] "/tmp/Rtmp7DZDDm/trial_emu/trial_6.csv"</span></span></code></pre></div>
<p>Each of these csv files contains the data for the trial starting at
period <code>_i</code>. To create a manageable dataset for the final
analysis we can sample from these trials.</p>
<p>Here we sample 10% of the patients without an event at each follow-up
time in each trial. All observations with events are included.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sampled_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/case_control_sampling_trials.html">case_control_sampling_trials</a></span><span class="op">(</span><span class="va">prep_data</span>, p_control <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">sampled_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'data.table' and 'data.frame':   99926 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ id                : int  176 358 165 476 176 475 54 423 176 476 ...</span></span>
<span><span class="co">#&gt;  $ trial_period      : int  1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ followup_time     : int  1 1 2 3 3 5 6 7 7 7 ...</span></span>
<span><span class="co">#&gt;  $ outcome           : num  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ weight            : num  1 1 0.999 0.999 0.999 ...</span></span>
<span><span class="co">#&gt;  $ treatment         : int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ catvarA           : Factor w/ 5 levels "0","1","2","3",..: 5 5 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ catvarB           : Factor w/ 5 levels "0","1","2","3",..: 5 5 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ nvarA             : int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ nvarB             : int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ nvarC             : int  45 47 70 49 45 69 49 56 45 49 ...</span></span>
<span><span class="co">#&gt;  $ assigned_treatment: int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">#&gt;  $ sample_weight     : num  10 10 10 10 10 10 10 10 10 10 ...</span></span>
<span><span class="co">#&gt;  - attr(*, ".internal.selfref")=&lt;externalptr&gt;</span></span></code></pre></div>
<p>Before proceeding with the modelling, it is possible to manipulate
and derive new variables and adjust factor levels in the
<code>data.frame</code>. You can also specify transformations in a
formula to <code>outcome_cov</code>, <code>include_followup_time</code>
or <code>include_trial_period</code>, such as
<code>~ ns(trial_period)</code> or
<code>~ I(nvarA^2) + nvarC &gt; 50 + catvarA:nvarC</code>.</p>
<p>It is also possible to specify formulas in <code><a href="../reference/trial_msm.html">trial_msm()</a></code>
to include, for example, splines with <code>ns()</code>.</p>
<p>Now we can fit the model with the <code><a href="../reference/trial_msm.html">trial_msm()</a></code> function.
Since we have sampled from the data, we should make use of the
<code>use_sample_weights</code> option to get correct survival
estimates.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/trial_msm.html">trial_msm</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">sampled_data</span>,</span>
<span>  outcome_cov <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"catvarA"</span>, <span class="st">"catvarB"</span>, <span class="st">"nvarA"</span>, <span class="st">"nvarB"</span>, <span class="st">"nvarC"</span><span class="op">)</span>,</span>
<span>  model_var <span class="op">=</span> <span class="st">"assigned_treatment"</span>,</span>
<span>  glm_function <span class="op">=</span> <span class="st">"glm"</span>,</span>
<span>  use_sample_weights <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Preparing for model fitting</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Fitting outcome model</span></span>
<span><span class="co">#&gt; Warning in eval(family$initialize): non-integer #successes in a binomial glm!</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = data, weights = w)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)        -2.35e+00   2.26e-01  -10.39  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; assigned_treatment -4.20e-01   5.37e-02   -7.83  5.0e-15 ***</span></span>
<span><span class="co">#&gt; trial_period       -2.09e-03   8.44e-04   -2.48    0.013 *  </span></span>
<span><span class="co">#&gt; I(trial_period^2)   1.04e-05   1.91e-06    5.48  4.3e-08 ***</span></span>
<span><span class="co">#&gt; followup_time       6.19e-03   1.21e-03    5.11  3.3e-07 ***</span></span>
<span><span class="co">#&gt; I(followup_time^2) -4.24e-05   8.96e-06   -4.73  2.3e-06 ***</span></span>
<span><span class="co">#&gt; catvarA1            3.35e-01   4.03e-02    8.30  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA2            4.42e-01   5.37e-02    8.23  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA3           -1.02e+01   5.62e+01   -0.18    0.856    </span></span>
<span><span class="co">#&gt; catvarA7            3.39e-01   6.38e-02    5.31  1.1e-07 ***</span></span>
<span><span class="co">#&gt; catvarB1           -4.41e-01   1.85e-01   -2.38    0.017 *  </span></span>
<span><span class="co">#&gt; catvarB2           -1.82e-01   1.89e-01   -0.96    0.336    </span></span>
<span><span class="co">#&gt; catvarB3           -2.45e+00   3.66e-01   -6.69  2.2e-11 ***</span></span>
<span><span class="co">#&gt; catvarB7           -9.16e-01   1.88e-01   -4.87  1.1e-06 ***</span></span>
<span><span class="co">#&gt; nvarA              -2.09e-02   8.80e-03   -2.37    0.018 *  </span></span>
<span><span class="co">#&gt; nvarB               3.21e-03   3.88e-04    8.28  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarC              -5.09e-02   1.23e-03  -41.21  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 53204  on 99925  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 50686  on 99909  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 50648</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 13</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span>
<span><span class="co">#&gt; Calculating robust variance</span></span>
<span><span class="co">#&gt; Summary with robust standard error:</span></span>
<span><span class="co">#&gt;                 names  estimate robust_se      2.5%     97.5%       z  p_value</span></span>
<span><span class="co">#&gt; 1         (Intercept) -2.35e+00  1.04e+00 -4.39e+00 -3.11e-01  -2.259 2.39e-02</span></span>
<span><span class="co">#&gt; 2  assigned_treatment -4.20e-01  4.23e-01 -1.25e+00  4.09e-01  -0.993 3.21e-01</span></span>
<span><span class="co">#&gt; 3        trial_period -2.09e-03  4.98e-03 -1.19e-02  7.67e-03  -0.420 6.74e-01</span></span>
<span><span class="co">#&gt; 4   I(trial_period^2)  1.04e-05  1.10e-05 -1.12e-05  3.21e-05   0.946 3.44e-01</span></span>
<span><span class="co">#&gt; 5       followup_time  6.19e-03  5.77e-03 -5.12e-03  1.75e-02   1.073 2.83e-01</span></span>
<span><span class="co">#&gt; 6  I(followup_time^2) -4.24e-05  5.15e-05 -1.43e-04  5.85e-05  -0.823 4.10e-01</span></span>
<span><span class="co">#&gt; 7            catvarA1  3.35e-01  2.63e-01 -1.80e-01  8.49e-01   1.274 2.03e-01</span></span>
<span><span class="co">#&gt; 8            catvarA2  4.42e-01  3.64e-01 -2.72e-01  1.15e+00   1.214 2.25e-01</span></span>
<span><span class="co">#&gt; 9            catvarA3 -1.02e+01  8.09e-01 -1.18e+01 -8.64e+00 -12.641 0.00e+00</span></span>
<span><span class="co">#&gt; 10           catvarA7  3.39e-01  3.49e-01 -3.46e-01  1.02e+00   0.970 3.32e-01</span></span>
<span><span class="co">#&gt; 11           catvarB1 -4.41e-01  6.49e-01 -1.71e+00  8.32e-01  -0.679 4.97e-01</span></span>
<span><span class="co">#&gt; 12           catvarB2 -1.82e-01  6.89e-01 -1.53e+00  1.17e+00  -0.264 7.92e-01</span></span>
<span><span class="co">#&gt; 13           catvarB3 -2.45e+00  1.11e+00 -4.63e+00 -2.77e-01  -2.209 2.72e-02</span></span>
<span><span class="co">#&gt; 14           catvarB7 -9.16e-01  6.66e-01 -2.22e+00  3.89e-01  -1.376 1.69e-01</span></span>
<span><span class="co">#&gt; 15              nvarA -2.09e-02  5.51e-02 -1.29e-01  8.71e-02  -0.379 7.05e-01</span></span>
<span><span class="co">#&gt; 16              nvarB  3.21e-03  2.49e-03 -1.66e-03  8.08e-03   1.292 1.96e-01</span></span>
<span><span class="co">#&gt; 17              nvarC -5.09e-02  9.24e-03 -6.90e-02 -3.28e-02  -5.506 3.66e-08</span></span>
<span><span class="co">#&gt; ------------------------------------------------------------</span></span></code></pre></div>
<p>The result is the same type as the previous result from the simple
<code>initiators</code> function, containing the <code>glm</code> object
and the sandwich results.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model_result</span><span class="op">)</span></span>
<span><span class="co">#&gt; Trial Emulation Outcome Model</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Outcome model formula:</span></span>
<span><span class="co">#&gt; outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficent summary (robust):</span></span>
<span><span class="co">#&gt;               names  estimate robust_se      2.5%     97.5%       z p_value</span></span>
<span><span class="co">#&gt;         (Intercept) -2.35e+00  1.04e+00 -4.39e+00 -3.11e-01  -2.259    0.02</span></span>
<span><span class="co">#&gt;  assigned_treatment -4.20e-01  4.23e-01 -1.25e+00  4.09e-01  -0.993    0.32</span></span>
<span><span class="co">#&gt;        trial_period -2.09e-03  4.98e-03 -1.19e-02  7.67e-03  -0.420    0.67</span></span>
<span><span class="co">#&gt;   I(trial_period^2)  1.04e-05  1.10e-05 -1.12e-05  3.21e-05   0.946    0.34</span></span>
<span><span class="co">#&gt;       followup_time  6.19e-03  5.77e-03 -5.12e-03  1.75e-02   1.073    0.28</span></span>
<span><span class="co">#&gt;  I(followup_time^2) -4.24e-05  5.15e-05 -1.43e-04  5.85e-05  -0.823    0.41</span></span>
<span><span class="co">#&gt;            catvarA1  3.35e-01  2.63e-01 -1.80e-01  8.49e-01   1.274    0.20</span></span>
<span><span class="co">#&gt;            catvarA2  4.42e-01  3.64e-01 -2.72e-01  1.15e+00   1.214    0.22</span></span>
<span><span class="co">#&gt;            catvarA3 -1.02e+01  8.09e-01 -1.18e+01 -8.64e+00 -12.641  &lt;2e-16</span></span>
<span><span class="co">#&gt;            catvarA7  3.39e-01  3.49e-01 -3.46e-01  1.02e+00   0.970    0.33</span></span>
<span><span class="co">#&gt;            catvarB1 -4.41e-01  6.49e-01 -1.71e+00  8.32e-01  -0.679    0.50</span></span>
<span><span class="co">#&gt;            catvarB2 -1.82e-01  6.89e-01 -1.53e+00  1.17e+00  -0.264    0.79</span></span>
<span><span class="co">#&gt;            catvarB3 -2.45e+00  1.11e+00 -4.63e+00 -2.77e-01  -2.209    0.03</span></span>
<span><span class="co">#&gt;            catvarB7 -9.16e-01  6.66e-01 -2.22e+00  3.89e-01  -1.376    0.17</span></span>
<span><span class="co">#&gt;               nvarA -2.09e-02  5.51e-02 -1.29e-01  8.71e-02  -0.379    0.70</span></span>
<span><span class="co">#&gt;               nvarB  3.21e-03  2.49e-03 -1.66e-03  8.08e-03   1.292    0.20</span></span>
<span><span class="co">#&gt;               nvarC -5.09e-02  9.24e-03 -6.90e-02 -3.28e-02  -5.506   4e-08</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; model_result$model contains the fitted glm model object.</span></span>
<span><span class="co">#&gt; model_result$robust$matrix contains the full robust covariance matrix.</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">model_result</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Call:</span></span>
<span><span class="co">#&gt; glm(formula = outcome ~ assigned_treatment + trial_period + I(trial_period^2) + </span></span>
<span><span class="co">#&gt;     followup_time + I(followup_time^2) + catvarA + catvarB + </span></span>
<span><span class="co">#&gt;     nvarA + nvarB + nvarC, family = binomial(link = "logit"), </span></span>
<span><span class="co">#&gt;     data = data, weights = w)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Coefficients:</span></span>
<span><span class="co">#&gt;                     Estimate Std. Error z value Pr(&gt;|z|)    </span></span>
<span><span class="co">#&gt; (Intercept)        -2.35e+00   2.26e-01  -10.39  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; assigned_treatment -4.20e-01   5.37e-02   -7.83  5.0e-15 ***</span></span>
<span><span class="co">#&gt; trial_period       -2.09e-03   8.44e-04   -2.48    0.013 *  </span></span>
<span><span class="co">#&gt; I(trial_period^2)   1.04e-05   1.91e-06    5.48  4.3e-08 ***</span></span>
<span><span class="co">#&gt; followup_time       6.19e-03   1.21e-03    5.11  3.3e-07 ***</span></span>
<span><span class="co">#&gt; I(followup_time^2) -4.24e-05   8.96e-06   -4.73  2.3e-06 ***</span></span>
<span><span class="co">#&gt; catvarA1            3.35e-01   4.03e-02    8.30  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA2            4.42e-01   5.37e-02    8.23  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; catvarA3           -1.02e+01   5.62e+01   -0.18    0.856    </span></span>
<span><span class="co">#&gt; catvarA7            3.39e-01   6.38e-02    5.31  1.1e-07 ***</span></span>
<span><span class="co">#&gt; catvarB1           -4.41e-01   1.85e-01   -2.38    0.017 *  </span></span>
<span><span class="co">#&gt; catvarB2           -1.82e-01   1.89e-01   -0.96    0.336    </span></span>
<span><span class="co">#&gt; catvarB3           -2.45e+00   3.66e-01   -6.69  2.2e-11 ***</span></span>
<span><span class="co">#&gt; catvarB7           -9.16e-01   1.88e-01   -4.87  1.1e-06 ***</span></span>
<span><span class="co">#&gt; nvarA              -2.09e-02   8.80e-03   -2.37    0.018 *  </span></span>
<span><span class="co">#&gt; nvarB               3.21e-03   3.88e-04    8.28  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; nvarC              -5.09e-02   1.23e-03  -41.21  &lt; 2e-16 ***</span></span>
<span><span class="co">#&gt; ---</span></span>
<span><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; (Dispersion parameter for binomial family taken to be 1)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     Null deviance: 53204  on 99925  degrees of freedom</span></span>
<span><span class="co">#&gt; Residual deviance: 50686  on 99909  degrees of freedom</span></span>
<span><span class="co">#&gt; AIC: 50648</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Number of Fisher Scoring iterations: 13</span></span></code></pre></div>
<p>We can also use this object to predict cumulative incidence curves
and use these for treatment comparisons. Here we use the patients who
were in the first trial as the target population. To get the data in the
right format, we can use the <code>data_template</code> returned by
<code><a href="../reference/data_preparation.html">data_preparation()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">working_dir</span>, <span class="st">"trial_1.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">new_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu">data.table</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/data.table/man/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="va">prep_data</span><span class="op">$</span><span class="va">data_template</span><span class="op">)</span>, <span class="va">new_data</span><span class="op">)</span></span>
<span><span class="va">model_preds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/predict_marginal.html">predict</a></span><span class="op">(</span><span class="va">model_result</span>, predict_times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">40</span><span class="op">)</span>, newdata <span class="op">=</span> <span class="va">new_data</span>, type <span class="op">=</span> <span class="st">"cum_inc"</span><span class="op">)</span></span></code></pre></div>
<p>The <code>predict</code> function returns a list of 3 data frames:
predictions for assigned treatment 0, for assigned treatment 1 and for
the difference. It possible to change the type of predicted values,
either cumulative incidence or survival.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">followup_time</span>,</span>
<span>  <span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">cum_inc_diff</span>,</span>
<span>  ty <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"Cumulative Incidence Difference"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Follow-up Time"</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.15</span>, <span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">followup_time</span>, <span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">`2.5%`</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">followup_time</span>, <span class="va">model_preds</span><span class="op">$</span><span class="va">difference</span><span class="op">$</span><span class="va">`97.5%`</span>, lty <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="Getting-Started_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Isaac Gravestock, Li Su, Roonak Rezvani, Julia Moesch, Medical Research Council (MRC), F. Hoffmann-La Roche AG.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
